#sidebar,
.sidebar-popout {
	#chat {
		#chat-log {
			.message {
				background-color: color("background-chat-message");
				background-image: $global-image-background-light;
				border: b("border");
				border-radius: $global-border-radius-default;
				color: color("text");
				font-size: fs("md");
				padding: p("base");
				margin: m("base");

				&:hover,
				&:focus {
					.message-metadata {
						opacity: 1;
					}
				}

				&.whisper {
					background-color: color("background-chat-message-whisper");
				}

				&.blind {
					background-color: color("background-chat-message-blind");
				}

				.message-header {
					color: inherit;
					line-height: 1.2;
					margin-block-end: m("base");
				}

				.message-metadata,
				.message-sender {
					align-items: center;
					display: inline-flex;
					font-size: fs("sm");
				}

				.message-metadata {
					opacity: 0;
					justify-content: flex-end;
					transition: t("opacity", "link");
				}

				.dice-roll .dice-formula,
				.dice-roll .dice-total {
					box-shadow: none;
					border: b("border");
					border-radius: $global-border-radius-default;
				}

				a.entity-link,
				a.inline-roll {
					@extend %primary-button;
					color: color("text-lightest");
					font-size: fs("sm");
					padding: p("xs") p("base");
					text-indent: 0;

					i {
						color: inherit;
						margin-inline-end: m("base");
					}
				}

				.button.message-delete {
					@extend %control-button;
					color: color("text");
				}
			}
		}

		#chat-controls {
			align-items: center;
			background-color: color("background", 0.5);
			background-image: $global-image-background;
			border-block-start: b("border");
			color: color("text-lightest");
			display: flex;
			flex: 0 0 auto;
			margin: 0;
			padding: p("sm");
			position: relative;

			.-compact & {
				padding: p("base");
			}

			.chat-control-icon {
				margin-inline-end: m("xs");

				.fa-dice-d20 {
					@extend %control-button;
					@extend %font-awesome;
					font-size: fs("md");
					margin: 0;
				}
			}

			.roll-type-select {
				@extend %input-select;
				align-items: center;
				background-color: color("background", 0.5);
				color: color("text-lightest");
				display: flex;
				flex: 1 1 auto;
				top: auto;
				width: auto;

				&:hover {
					@extend %global-hover-alt;
				}

				&:focus {
					@extend %global-focus;
				}

				&:disabled {
					pointer-events: none;
				}
			}

			.control-buttons {
				align-items: center;
				display: flex;
				flex: 0 0 auto;

				.button {
					@extend %control-button;

					> i {
						font-size: inherit;
						line-height: initial;
					}
				}
			}
		}

		#chat-form {
			align-items: center;
			background-color: color("background", 0.5);
			background-image: $global-image-background;
			border-block-start: b("border");
			color: color("text-lightest");
			display: flex;
			flex: 0 0 auto;
			height: to-rem(112px);
			margin: 0;
			padding: p("sm");
			position: relative;

			.-compact & {
				padding: p("base");
			}

			textarea {
				@extend %input-textarea;
				@include size(100%);
				background-color: color("background-lightest", 0.9);
				background-image: $global-image-background-light;
				padding: p("sm");

				.compact & {
					padding: p("base");
				}
			}
		}
	}
}
